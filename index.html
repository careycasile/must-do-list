<!doctype html>
<html lang="en">
	<head>
		<title>Udacity Map Project</title>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<link rel="stylesheet" type="text/css" href="css/app.css">
		<link rel="stylesheet" href="css/font-awesome.min.css">
		<script type='text/javascript' src='js/jquery-3.1.1.js'></script>
	</head>

	<body>

	<script async defer>
		//This Script tag is called from mk.modifyPinSelect and it calls for a list of wikipedia articles
		//which are displayed inside the info window
		var callFun = function(num) {
			var numberOf = num;
			var search = vm.fullArray[num].name
			var wikiUrl = 'http://en.wikipedia.org/w/api.php?action=opensearch&search=' + search + '&format=json&callback=wikiCallback';

			$.ajax({
				url: wikiUrl,
				dataType: 'jsonp',
				success: function(response){
					var articleList = response[1];
					console.log(articleList);
					var articleStr = null;
					for (var x = 0; x < articleList.length; x++) {
						articleStr = articleList[x];

						url = 'http://en.wikipedia.org/wiki/' + articleStr;	

						var tempLi = '<li class="wikiItem"><a href="' + url + '">' + articleStr + '</a></li>';
						$('.wiki' + numberOf).append(tempLi);
					}

					if (articleStr === null) {
						var tempLi = '<li class="wikiItem">No Wikipedia Entries For This Location</li>';
						$('.wiki' + numberOf).append(tempLi);
					}
				}
			}).fail(function(response){
					var tempLi = '<li class="wikiItem">Wikipedia Failed To Connect</li>';
					$('.wiki' + numberOf).append(tempLi);
				});
		}
	</script>

		<h1><i class="fa fa-camera" aria-hidden="true"></i>&nbsp;Pittsburgh Must-Do List</h1>
		<div class='main'>
			<div class='left'>
				<div class="input-filter">
					<input class='input' placeholder="Restaurant, Museum..." data-bind='value: userSubmission, valueUpdate: "keyup"'>
				</div>
				<ul>
			        <div data-bind="foreach: fullArray">
			                <li class="item" data-bind="click: $parent.itemClick, visible: visible">
			                	<span data-bind="html: display"></span>
			                	<span data-bind='text: name'></span>
			                </li>
			        </div>
				</ul>
			</div>
			<div class='right'>
				<div id='map'>
				</div>
			</div>
		</div>
	</body>
	
	<script type='text/javascript' src='js/knockout-3.4.1.js'></script>
	<script type='text/javascript' src="js/app.js"></script>
    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCD_6f-GSSpKCE4Dq849hfXY0yCp16Y0i4&callback=InitMap" async defer></script>
</html>